import Callout from 'nextra-theme-docs/callout'

# Client

The wagmi `Client` is a framework agnostic (Vanilla JS) client that manages wallet connection state and configuration, such as: auto-connection, connectors, and ethers.js providers.

```ts
import { createClient } from 'wagmi'
```

To help avoid conflicts with other libraries in your app, `createClient` is also aliased as `createWagmiClient`.

```ts
import { createWagmiClient } from 'wagmi'
```

## Usage

```ts
import { createClient } from 'wagmi'

const client = createClient()
```

## Configuration

### autoConnect (optional)

Enables reconnecting to last used connector on mount. Defaults to `false`.

```ts {4}
import { createClient } from 'wagmi'

const client = createClient({
  autoConnect: true,
})
```

### connectors (optional)

Connectors used for linking accounts. Defaults to `[new InjectedConnector()]`.

```ts {6-14}
import { createClient } from 'wagmi'
import { InjectedConnector } from 'wagmi/connectors/injected'
import { WalletConnectConnector } from 'wagmi/connectors/walletConnect'

const client = createClient({
  connectors: [
    new InjectedConnector(),
    new WalletConnectConnector({
      options: {
        infuraId: 'Your infura id',
        qrcode: true,
      },
    }),
  ],
})
```

`connectors` also accepts a function that receives basic data about the current connection. For example, this is useful if you want to make your connectors aware of the active chain.

```ts {5}
import { chain, createClient, defaultChains } from 'wagmi'
import { CoinbaseWalletConnector } from 'wagmi/connectors/coinbaseWallet'

const alchemyId = process.env.ALCHEMY_ID

const client = createClient({
  connectors(config) {
    const chain = chains.find((x) => x.id === chainId) ?? defaultChain
    const rpcUrl = chain.rpcUrls.alchemy
      ? `${chain.rpcUrls.alchemy}/${alchemyId}`
      : typeof chain.rpcUrls.default === 'string'
      ? chain.rpcUrls.default
      : chain.rpcUrls.default[0]
    return [
      new CoinbaseWalletConnector({
        options: {
          appName: 'wagmi',
          chainId: chain.id,
          jsonRpcUrl: rpcUrl,
        },
      }),
    ]
  },
})
```

### provider (optional)

ethers.js [interface](https://docs.ethers.io/v5/api/providers) for connecting to the Ethereum network. Defaults to `(config) => getDefaultProvider(config.chainId)`.

```ts {5-7}
import { providers } from 'ethers'
import { createClient } from 'wagmi'

const client = createClient({
  provider(config) {
    return new providers.AlchemyProvider(config.chainId, 'Your Alchemy ID')
  },
})
```

`provider` also accepts an ethers.js provider directly instead of using a function, but you likely want to use the function approach instead so your provider is aware of the active chain.

<Callout emoji="ðŸ’¡">
  When using `getDefaultProvider()`, you likely want to [provide an API key for
  each
  service](https://docs.ethers.io/v5/api-keys/#api-keys--getDefaultProvider) to
  minimize disruptions. By default `getDefaultProvider` falls back to ethers.js
  shared API keys.
</Callout>

### storage (optional)

The default strategy to persist and cache data. Defaults to `window.localStorage`.

```ts {4}
import { createClient, createStorage } from 'wagmi'

const client = createClient({
  storage: createStorage({ storage: window.localStorage }),
})
```

### webSocketProvider (optional)

ethers.js WebSocket interface for connecting to the Ethereum network. If you provide a WebSocket provider, it will be used instead of polling in certain instances.

```ts {5-7}
import { providers } from 'ethers'
import { createClient } from 'wagmi'

const client = createClient({
  webSocketProvider(config) {
    return new providers.AlchemyWebSocketProvider(
      config.chainId,
      'Your Alchemy ID',
    )
  },
})
```

`webSocketProvider` also accepts an ethers.js WebSocket provider directly instead of using a function, but you likely want to use the function approach instead so your WebSocket provider is aware of the active chain.
